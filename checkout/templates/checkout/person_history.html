{% extends 'checkout/base.html' %}
{% load humanize %}

{% block content %}

<script>
$(function () {
  $('[data-toggle="popover"]').popover()
})
</script>

<style>
.btn-items {
  line-height: 2.0 !important;
}
#sidebar-wrapper {
	width: 120px;
	padding-top: 100px;
}
#sidebar-wrapper a:hover {
	background-color: inherit;
}

ul.sidebar-nav li {
    margin-top: 25px;
}

#wrapper {
	padding-left: 120px;
}

</style>

<div id="wrapper">
	<!-- Sidebar -->
	<div id="sidebar-wrapper">
		<ul class="sidebar-nav">
			<li><a href="/"><i class="fa fa-search fa-2x fa-fw"></i></a></li>
			<li><a href="{% url 'checkout.views.person_detail' pk=person.pk %}"><i class="fa fa-calendar fa-2x fa-fw"></i></a></li>
			<li><a href="{% url 'checkout.views.person_history' pk=person.pk %}"><i class="fa fa-history fa-2x fa-fw"></i></a></li>
			<li><a href="{% url 'checkout.views.browse_popup' pk=person.pk %}"><i class="fa fa-plus-circle fa-2x fa-fw"></i></a></li>
    </ul>

	</div>
	<!-- /#sidebar-wrapper -->

	<!-- Page Content -->
	<div id="page-content-wrapper">
		<div class="container-fluid">
			<div class="row">
				<div class="col-lg-12">
					<div class="page-header">
						<span class="h1">{{ person.full_name }}</span>
						<span class="h4 text-muted">{{ person.id_number }}</span>
						<span class="label label-success">{{ person.inventory|length }} Items</span>
						<span class="label label-warning">{{ person.requests|length }} Requests</span>			 
					</div>
				</div>
			</div>

<div class="h3">Your History</div>
    {% if history|length > 0 %}
    <div class="table-responsive">
      <table class="table table-striped table-condensed">
<thead>
      <tr>
      <th>Item</th>
      <th>Serial</th>
      <th>Category</th>
      <th>Time Out</th>
    </tr>
</thead>
<tbody>
    {% for transaction in person.history %}
      <tr>
      <td><a data-toggle="modal" href="{% url 'checkout.views.item_popup' pk=transaction.item.pk %}" data-target="#myModal">{{ transaction.item.brand }} {{ transaction.item.model }}</a></td>
      <td>{{ transaction.item.serial }}</td>
      <td>{{ transaction.item.category }}</td>
      <td>{{ transaction.time_out|naturaltime }}</td>
      </tr>
    {% endfor %}
</tbody>
</table>
</div>
          {% else %}
            <span class="text-muted">No history to display.</span>
            <div class="clearfix"></div>
          {% endif %}
    </div>  <!-- col -->
  </div> <!-- row -->

</div>

{% include 'checkout/popup.html' %}

{% endblock content %}
