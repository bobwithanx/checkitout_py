{% extends 'checkout/base.html' %}

{% block content %}
{% load humanize %}

<script>
$(function () {
  $('[data-toggle="popover"]').popover()
})

$('body').on('hidden.bs.modal', '.modal', function () {
  $(this).removeData('bs.modal');
});


</script>

<style>
.btn-items {
  line-height: 2.0 !important;
}

.table>tbody>tr>td, .table>tbody>tr>th, .table>tfoot>tr>td, .table>tfoot>tr>th, .table>thead>tr>td, .table>thead>tr>th {
	font-size: 14px;
}
</style>

<script type="text/javascript">
$(document).ready(function(){
    $('#myTable').DataTable( {
    "lengthChange": false
    } );
});
</script>

<style>
body { font-size: 140%; }

.dataTables_wrapper .dataTables_paginate .paginate_button.current, .dataTables_wrapper .dataTables_paginate .paginate_button.current:hover {
	color: #333 !important;
border: 1px solid #cacaca;
background-color: #fff;
}

.dataTables_wrapper {
position: relative;
clear: both;
zoom: 1;
}

.dataTables_wrapper .dataTables_info {
	clear: both;
	float: left;
	}

.dataTables_wrapper .dataTables_paginate .paginate_button:hover {
color: white !important;
border: 1px solid #111;
background-color: #585858;
}

.dataTables_wrapper .dataTables_paginate .paginate_button {
	box-sizing: border-box;
display: inline-block;
min-width: 1.5em;
padding: 0.5em 1em;
margin-left: 2px;
text-align: center;
text-decoration: none !important;
cursor: pointer;
border: 1px solid transparent;
}

div.dataTables_paginate {
white-space: nowrap;
}
</style>

<div class="col-md-12 main">
  <div class="page-header h1">{{ person.full_name }} <small>{{ person.id_number }}</small>
  {% if person.inventory|length > 0 %}
  <div class="btn-group" role="group" data-placement="right" data-html=True data-toggle="popover" title="Current Loans" data-content="{% for transaction in person.inventory %}{{ transaction.item }}<br/>{% endfor %}">
  {% else %}
  <div class="btn-group" role="group">
  {% endif %}
    <button type="button" class="btn btn-items btn-success">
      <span class="glyphicon glyphicon-tags btn-items" aria-hidden="true"></span>
    </button>
  <button type="button" class="btn btn-items btn-default">{{ person.inventory|length }} Items</button>
  </div>
  </div>
<div class="row">
<div class="col-sm-12 col-md-12">
	<ul class="nav nav-tabs">
		<li role="presentation" class="active"><a href="{% url 'checkout.views.person_detail' pk=person.pk %}">Available Items</a></li>
		<li role="presentation"><a href="{% url 'checkout.views.person_history' pk=person.pk %}">Borrowing History</a></li>
	</ul>

	<div class="h3">Available Items</div>
    <table id="myTable" class="table table-condensed table-striped">
      <thead> 
        <tr>
					<th>Item</th>
					<th>Serial #</th>
					<th>Barcode</th>
					<th>Category</th>
					<th>Description</th>
					<th>Action</th>
     		</tr>
     	</thead>
     	<tbody>
     		{% for item in available_items %}
	 				<tr> 
						<td><a data-toggle="modal" href="{% url 'checkout.views.item_popup' pk=item.pk %}" data-target="#myModal">{{ item }}</a></td>
						<td>{{ item.serial }}</td>
						<td>{{ item.barcode_id }}</td>
						<td>{{ item.category }}</td>
						<td>{{ item.description }}</td>
					  <td><a class="action-link" role="button" href="{% url 'checkout.views.request_item' p=person.pk i=item.pk %}">request</a></td>
					</tr>
			  {% endfor %}
			</tbody>
		</table>
  </div>  <!-- col -->
</div>  <!-- row -->

</div>

<!-- Modal -->
<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog" modal-lg>
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                 <h4 class="modal-title">Modal title</h4>
            </div>
            <div class="modal-body"><div class="te"></div></div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary">Save changes</button>
            </div>
        </div>
        <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
</div>
<!-- /.modal -->

{% endblock content %}
