{% extends 'checkout/base.html' %}
{% load staticfiles %}

{% block content %}

<style>
	.vertical-center {
		min-height: 100%;  /* Fallback for browsers do NOT support vh unit */
		min-height: 100vh; /* These two lines are counted as one :-)       */

		display: flex;
		align-items: center;
	}

	.col-centered {
			float: none;
			margin: 0 auto;
	}
	
	#search {
		font-size: 1.2em;
	}
	
</style>

<script type="text/javascript">
  $(document).ready(function(){
      $('[data-toggle="popover"]').popover();   
  });
</script>

<div class="jumbotron vertical-center">
	<div class="container">
		<div class="row">
			<div class="col-md-8 col-md-offset-2 ">
        {% if status == 0 %}
          <div class="alert-message alert-message-success" role="alert">
            <h4>Success</h4>
            <strong>{{ status_object }}</strong> was returned.
          </div>
        {% elif status == 1 %}
          <div class="alert-message alert-message-danger" role="alert">
            <h4>Error</h4>
            Sorry, <strong>{{ status_object }}</strong> cannot be found.
          </div>
        {% endif %}
      </div>
			<div class="col-md-12">
				<h2 class="text-center"><i class="fa fa-large fa-arrow-circle-o-down"></i> Return Item</h2>
				<div class="container-fluid">
					<div class="col-xs-6 col-sm-6 col-md-6 col-lg-4 col-centered">
						<form action="{% url 'checkout.views.quick_checkin' %}" method="POST" role="form">
							<div class="form-group">
								<div class="input-group">
									{% csrf_token %}
									<input autofocus text="search" name="barcode" id="search" value="" class="form-control" placeholder="Scan barcode"/>
									<span class="input-group-btn">
										<button class="btn btn-success" type="submit">Go</button>
									</span>
								</div>
							</div>
						</form>
					</div> <!-- col -->

          {% if loans|length > 0 %}
<div class="container">
	<div class="row">
		<div class="col-md-8 col-md-offset-2">
		<div class="panel panel-default">
		  <div class="panel-heading">
		    Current Loans
		  </div>
      <div class="table-responsive">
        <table id="myTable" class="table table-hover table-condensed">
          <thead>
                <tr>
                <th>Person</th>
                <th>ID Number</th>
                <th>Group</th>
                <th>Inventory</th>
              </tr>
          </thead>
          <tbody>
          {% for person in loans %}
            <tr>
              <td><a href="{% url 'checkout.views.person_detail' id_number=person.id_number %}">{{ person }}</a></td>
              <td>{{ person.id_number }}</a></td>
              <td>{{ person.group }}</a></td>
              <td>
                <a class="btn btn-link" data-toggle="popover" title="Popover title" data-content="{{ person.inventory }}">
                  {% if person.inventory|length = 1 %}
                    1 item
                  {% elif person.inventory|length > 1 %}
                    {{ person.inventory|length }} items
                  {% endif %}
                </a>
              </td>
            </tr>
          {% endfor %}
          </tbody>
        </table>
      </div>
    </div>
    </div>
  </div>
</div>


					{% endif %}			
				</div> <!-- container-fluid -->
			</div> <!-- col -->
		</div> <!-- row -->
	</div> <!-- container -->
</div> <!-- jumbotron -->

{% endblock content %}
